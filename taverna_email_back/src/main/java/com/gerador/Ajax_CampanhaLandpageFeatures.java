package com.gerador; 
import com.funcs.Utilitario; 
import java.util.Date; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import org.json.simple.JSONObject; 
import java.sql.Connection; 
import java.text.SimpleDateFormat; 
import java.io.PrintWriter; 
import org.json.simple.JSONArray; 

public class Ajax_CampanhaLandpageFeatures{ 

 public void carregaUnicoAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();	PrintWriter out = response.getWriter();  String pk2 = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   String pk = request.getParameter("id_feature") == null ? "" : request.getParameter("id_feature");   	if (!Utilitario.isNumeric(pk)) { throw new Exception("Parâmetro inválido!"); } 	if (!Utilitario.isNumeric(pk2)) { throw new Exception("Parâmetro inválido!"); } 	CampanhaLandpageFeatures obj = new CampanhaLandpageFeatures(conn);  	obj.setIdLandpage( Long.parseLong(pk2) ); 	obj.setIdFeature( Integer.parseInt(pk) ); 	obj.lista(); 	if(obj.next()){retorno.put("desc_feature", obj.getDescFeature() == null ? "" : obj.getDescFeature() );retorno.put("desc_class_icon", obj.getDescClassIcon() == null ? "" : obj.getDescClassIcon() );retorno.put("desc_name", obj.getDescName() == null ? "" : obj.getDescName() ); 	} 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); } public void SaveAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();	PrintWriter out = response.getWriter();  String id_landpage = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   String id_feature = request.getParameter("id_feature") == null ? "" : request.getParameter("id_feature");   String desc_feature = request.getParameter("desc_feature") == null ? "" : request.getParameter("desc_feature");   String desc_class_icon = request.getParameter("desc_class_icon") == null ? "" : request.getParameter("desc_class_icon");   String desc_name = request.getParameter("desc_name") == null ? "" : request.getParameter("desc_name");   	if (!Utilitario.isNumeric(id_landpage)) { throw new Exception("Parâmetro inválido!"); } 	if (!Utilitario.isNumeric(id_feature)) { throw new Exception("Parâmetro inválido!"); } if(desc_feature.equalsIgnoreCase("")){ throw new Exception("Campo desc_feature esta em branco!"); }  if(desc_class_icon.equalsIgnoreCase("")){ throw new Exception("Campo desc_class_icon esta em branco!"); }  if(desc_name.equalsIgnoreCase("")){ throw new Exception("Campo desc_name esta em branco!"); }  	CampanhaLandpageFeatures obj = new CampanhaLandpageFeatures(conn);  	obj.setIdLandpage( Long.parseLong(id_landpage) ); 	obj.setIdFeature( Integer.parseInt(id_feature) ); 	obj.setDescFeature( desc_feature ); 	obj.setDescClassIcon( desc_class_icon ); 	obj.setDescName( desc_name ); 	obj.insert(); 	obj.update(); 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); } public void ListaAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();JSONObject objjson = new JSONObject();	PrintWriter out = response.getWriter(); JSONArray array = new JSONArray(); String id_landpage = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   String id_feature = request.getParameter("id_feature") == null ? "" : request.getParameter("id_feature");   String desc_feature = request.getParameter("desc_feature") == null ? "" : request.getParameter("desc_feature");   String desc_class_icon = request.getParameter("desc_class_icon") == null ? "" : request.getParameter("desc_class_icon");   String desc_name = request.getParameter("desc_name") == null ? "" : request.getParameter("desc_name");   	if (!Utilitario.isNumeric(id_landpage)) { throw new Exception("Parâmetro inválido!"); } 	if (!Utilitario.isNumeric(id_feature)) { throw new Exception("Parâmetro inválido!"); } if(desc_feature.equalsIgnoreCase("")){ throw new Exception("Campo desc_feature esta em branco!"); }  if(desc_class_icon.equalsIgnoreCase("")){ throw new Exception("Campo desc_class_icon esta em branco!"); }  if(desc_name.equalsIgnoreCase("")){ throw new Exception("Campo desc_name esta em branco!"); }  	CampanhaLandpageFeatures obj = new CampanhaLandpageFeatures(conn);  if(!id_landpage.equalsIgnoreCase("")){   	obj.setIdLandpage( Long.parseLong(id_landpage) ); } if(!id_feature.equalsIgnoreCase("")){   	obj.setIdFeature( Integer.parseInt(id_feature) ); } if(!desc_feature.equalsIgnoreCase("")){   	obj.setDescFeature( desc_feature ); } if(!desc_class_icon.equalsIgnoreCase("")){   	obj.setDescClassIcon( desc_class_icon ); } if(!desc_name.equalsIgnoreCase("")){   	obj.setDescName( desc_name ); } 	obj.lista(); 	while(obj.next()){objjson = new JSONObject();objjson.put("id_landpage", obj.getIdLandpage() == null ? 0 : obj.getIdLandpage() );objjson.put("id_feature", obj.getIdFeature() == null ? "" : obj.getIdFeature() );objjson.put("desc_feature", obj.getDescFeature() == null ? "" : obj.getDescFeature() );objjson.put("desc_class_icon", obj.getDescClassIcon() == null ? "" : obj.getDescClassIcon() );objjson.put("desc_name", obj.getDescName() == null ? "" : obj.getDescName() );array.add(objjson); 	} 	retorno.put("lista", array); 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); }
 
 }