package com.gerador; 
import com.funcs.Utilitario; 
import java.util.Date; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import org.json.simple.JSONObject; 
import java.sql.Connection; 
import java.text.SimpleDateFormat; 
import java.io.PrintWriter; 
import org.json.simple.JSONArray; 

public class Ajax_CampanhaLandpage{ 

 public void carregaUnicoAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();	PrintWriter out = response.getWriter();  String pk = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   	if (!Utilitario.isNumeric(pk)) { throw new Exception("Parâmetro inválido!"); } 	CampanhaLandpage obj = new CampanhaLandpage(conn);  	obj.setIdLandpage( Long.parseLong(pk) ); 	obj.lista(); 	if(obj.next()){retorno.put("id_campanha", obj.getIdCampanha() == null ? 0 : obj.getIdCampanha() );retorno.put("desc_titulo_1", obj.getDescTitulo1() == null ? "" : obj.getDescTitulo1() );retorno.put("desc_sub_titulo_1", obj.getDescSubTitulo1() == null ? "" : obj.getDescSubTitulo1() );retorno.put("url_video", obj.getUrlVideo() == null ? "" : obj.getUrlVideo() );retorno.put("desc_campanha", obj.getDescCampanha() == null ? "" : obj.getDescCampanha() );retorno.put("desc_titulo_2", obj.getDescTitulo2() == null ? "" : obj.getDescTitulo2() );retorno.put("sub_titulo_2", obj.getSubTitulo2() == null ? "" : obj.getSubTitulo2() ); 	} 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); } public void SaveAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();	PrintWriter out = response.getWriter();  String id_landpage = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   String id_campanha = request.getParameter("id_campanha") == null ? "" : request.getParameter("id_campanha");   String desc_titulo_1 = request.getParameter("desc_titulo_1") == null ? "" : request.getParameter("desc_titulo_1");   String desc_sub_titulo_1 = request.getParameter("desc_sub_titulo_1") == null ? "" : request.getParameter("desc_sub_titulo_1");   String url_video = request.getParameter("url_video") == null ? "" : request.getParameter("url_video");   String desc_campanha = request.getParameter("desc_campanha") == null ? "" : request.getParameter("desc_campanha");   String desc_titulo_2 = request.getParameter("desc_titulo_2") == null ? "" : request.getParameter("desc_titulo_2");   String sub_titulo_2 = request.getParameter("sub_titulo_2") == null ? "" : request.getParameter("sub_titulo_2");   	if (!Utilitario.isNumeric(id_landpage)) { throw new Exception("Parâmetro inválido!"); } 	if (!Utilitario.isNumeric(id_campanha)) { throw new Exception("Parâmetro inválido!"); } if(desc_titulo_1.equalsIgnoreCase("")){ throw new Exception("Campo desc_titulo_1 esta em branco!"); }  if(desc_sub_titulo_1.equalsIgnoreCase("")){ throw new Exception("Campo desc_sub_titulo_1 esta em branco!"); }  if(url_video.equalsIgnoreCase("")){ throw new Exception("Campo url_video esta em branco!"); }  if(desc_campanha.equalsIgnoreCase("")){ throw new Exception("Campo desc_campanha esta em branco!"); }  if(desc_titulo_2.equalsIgnoreCase("")){ throw new Exception("Campo desc_titulo_2 esta em branco!"); }  if(sub_titulo_2.equalsIgnoreCase("")){ throw new Exception("Campo sub_titulo_2 esta em branco!"); }  	CampanhaLandpage obj = new CampanhaLandpage(conn);  	obj.setIdLandpage( Long.parseLong(id_landpage) ); 	obj.setIdCampanha( Long.parseLong(id_campanha) ); 	obj.setDescTitulo1( desc_titulo_1 ); 	obj.setDescSubTitulo1( desc_sub_titulo_1 ); 	obj.setUrlVideo( url_video ); 	obj.setDescCampanha( desc_campanha ); 	obj.setDescTitulo2( desc_titulo_2 ); 	obj.setSubTitulo2( sub_titulo_2 ); 	obj.insert(); 	obj.update(); 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); } public void ListaAjax(HttpServletRequest request, HttpServletResponse response, Connection conn ) throws Exception{  JSONObject retorno = new JSONObject();JSONObject objjson = new JSONObject();	PrintWriter out = response.getWriter(); JSONArray array = new JSONArray(); String id_landpage = request.getParameter("id_landpage") == null ? "" : request.getParameter("id_landpage");   String id_campanha = request.getParameter("id_campanha") == null ? "" : request.getParameter("id_campanha");   String desc_titulo_1 = request.getParameter("desc_titulo_1") == null ? "" : request.getParameter("desc_titulo_1");   String desc_sub_titulo_1 = request.getParameter("desc_sub_titulo_1") == null ? "" : request.getParameter("desc_sub_titulo_1");   String url_video = request.getParameter("url_video") == null ? "" : request.getParameter("url_video");   String desc_campanha = request.getParameter("desc_campanha") == null ? "" : request.getParameter("desc_campanha");   String desc_titulo_2 = request.getParameter("desc_titulo_2") == null ? "" : request.getParameter("desc_titulo_2");   String sub_titulo_2 = request.getParameter("sub_titulo_2") == null ? "" : request.getParameter("sub_titulo_2");   	if (!Utilitario.isNumeric(id_landpage)) { throw new Exception("Parâmetro inválido!"); } 	if (!Utilitario.isNumeric(id_campanha)) { throw new Exception("Parâmetro inválido!"); } if(desc_titulo_1.equalsIgnoreCase("")){ throw new Exception("Campo desc_titulo_1 esta em branco!"); }  if(desc_sub_titulo_1.equalsIgnoreCase("")){ throw new Exception("Campo desc_sub_titulo_1 esta em branco!"); }  if(url_video.equalsIgnoreCase("")){ throw new Exception("Campo url_video esta em branco!"); }  if(desc_campanha.equalsIgnoreCase("")){ throw new Exception("Campo desc_campanha esta em branco!"); }  if(desc_titulo_2.equalsIgnoreCase("")){ throw new Exception("Campo desc_titulo_2 esta em branco!"); }  if(sub_titulo_2.equalsIgnoreCase("")){ throw new Exception("Campo sub_titulo_2 esta em branco!"); }  	CampanhaLandpage obj = new CampanhaLandpage(conn);  if(!id_landpage.equalsIgnoreCase("")){   	obj.setIdLandpage( Long.parseLong(id_landpage) ); } if(!id_campanha.equalsIgnoreCase("")){   	obj.setIdCampanha( Long.parseLong(id_campanha) ); } if(!desc_titulo_1.equalsIgnoreCase("")){   	obj.setDescTitulo1( desc_titulo_1 ); } if(!desc_sub_titulo_1.equalsIgnoreCase("")){   	obj.setDescSubTitulo1( desc_sub_titulo_1 ); } if(!url_video.equalsIgnoreCase("")){   	obj.setUrlVideo( url_video ); } if(!desc_campanha.equalsIgnoreCase("")){   	obj.setDescCampanha( desc_campanha ); } if(!desc_titulo_2.equalsIgnoreCase("")){   	obj.setDescTitulo2( desc_titulo_2 ); } if(!sub_titulo_2.equalsIgnoreCase("")){   	obj.setSubTitulo2( sub_titulo_2 ); } 	obj.lista(); 	while(obj.next()){objjson = new JSONObject();objjson.put("id_landpage", obj.getIdLandpage() == null ? 0 : obj.getIdLandpage() );objjson.put("id_campanha", obj.getIdCampanha() == null ? 0 : obj.getIdCampanha() );objjson.put("desc_titulo_1", obj.getDescTitulo1() == null ? "" : obj.getDescTitulo1() );objjson.put("desc_sub_titulo_1", obj.getDescSubTitulo1() == null ? "" : obj.getDescSubTitulo1() );objjson.put("url_video", obj.getUrlVideo() == null ? "" : obj.getUrlVideo() );objjson.put("desc_campanha", obj.getDescCampanha() == null ? "" : obj.getDescCampanha() );objjson.put("desc_titulo_2", obj.getDescTitulo2() == null ? "" : obj.getDescTitulo2() );objjson.put("sub_titulo_2", obj.getSubTitulo2() == null ? "" : obj.getSubTitulo2() );array.add(objjson); 	} 	retorno.put("lista", array); 	retorno.put("msg", ""); 	retorno.put("msgok", "ok"); 	out.print(retorno.toJSONString()); }
 
 }